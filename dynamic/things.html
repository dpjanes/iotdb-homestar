{% extends 'template' %}
{% block head_footer %}
    <script src="/things.js"></script>
{% endblock %}
{% block content %}
    [[{ htmld.header|safe }]]
    <h1>Things</h1>
    {% for thing in things() %}
    <ul class="list-group">
        <li class="list-group-item active" data-interactor="title" data-id="{{ thing._id }}">
            <span class="action-group">{{ thing._name }}</span>
            {% if user.permissions.owner %}
            <a href="/auth/things/{{ thing._id }}" class="pull-right action-edit-permission">â˜†</a>
            {% endif %}
        </li>
        {% for attribute in thing._model["iot:attribute"] %}
            <li class="list-group-item interactor" data-interactor="{{ attribute._interactor }}" data-thing="{{ thing._id }}" data-attribute="{{ attribute._code }}" onclick>
                {# <div>interactor:{{ attribute._interactor }}</div> #}
                [[{ htmld.attribute|safe }]]
            </li>
        {% endfor %}
    </ul>
    {% endfor %}
{% endblock %}
{% block body_footer %}
    <script>var settingsd = {{ settings()|json(2)|safe }};</script>
    <script src="mqttws31.js"></script>
    <script src="index.js"></script>
    [[{ htmld.footer|safe }]]
{% endblock %}
